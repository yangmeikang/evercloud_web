<!-- BEGIN PAGE HEADER-->
<!-- END PAGE HEADER-->
<!-- BEGIN MAIN CONTENT ng-controller="InstanceController"-->
<div class="row">
    <div class="col-md-12">
        <div class="note note-success ng-scope">
            <p>
                {[{ 'balancer.balancer_desc' |i18next}]}
            </p>
        </div>
        <!-- BEGIN INSTANCE  -->
        <ul class="nav nav-tabs tables">

            <li class="" ng-class="{active:pools_tab}">
                <a href="javascript:void(0);" ng-click="tab_select('pools');"><!--<i class="fa fa-flask"></i>--> {[{
                    'balancer.balancer' | i18next }]} </a>
            </li>

            <li class="" ng-class="{active:monitor_tab}">
                <a href="javascript:void(0);" ng-click="tab_select('monitor');"><!--<i class="fa fa-search"></i>-->{[{
                    'balancer.monitor' | i18next }]}</a>
            </li>

        </ul>
        <div class="tab-content">
            <div class="tab-pane fade " ng-class="{active:pools_tab,in:pools_tab}" id="pools">
                <div class="alertContainer clearfix">
                    <div class="alert alert-warning alert-dismissable">
                        <span class="msgContainer">{[{ 'balancer.vip_tip' | i18next }]}</span>
                    </div>
                </div>
                <div class="portlet">
                    <div class="portlet-title">
                        <div class="caption font-green-sharp">
                            <a class="btn btn-icon-only btn-default" href="#" ng-click="loadbalancer_table.reload();">
                                <i class="fa fa-refresh"></i>
                            </a>
                            <a href="javascript:void(0);" id="loadBalance-fa-plus"
                               class="btn btn-primary"
                               data-ng-click="openCreateBalancerModal()">
                                <i class="fa fa-plus"></i>{[{ 'balancer.create_balancer_title' | i18next }]}
                            </a>
                            <a class="btn btn-danger" data-ng-click="deleteBalancers()"
                               data-ng-class="{'disabled-link disabled ': checked_count <= 0}">
                                <i class="fa fa-trash"></i>
                                {[{ 'balancer.delete' | i18next }]}
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="dataTables_wrapper no-footer">
                            <table ng-table="loadbalancer_table"
                                   class="table table-striped table-bordered table-advance table-hover">
                                <tbody>
                                <tr ng-repeat="balancer in $data ">
                                    <td width="30" style="text-align: left" header="'ng-table/headers/checkbox.html'">
                                        <input type="checkbox" ng-class="{'disabled': balancer.is_unstable}"
                                               ng-model="checkboxes.items[balancer.id]"/>
                                    </td>
                                    <td data-title="'ID' | i18next">{[{ balancer.id}]}</td>
                                    <td data-title="'balancer.balancer_name' | i18next">
                                        <a href="#/lbaas/{[{balancer.id}]}">{[{ balancer.name }]}</a>
                                    </td>
                                    <td data-title="'balancer.description' | i18next">{[{ balancer.description }]}</td>
                                    <td data-title="'balancer.vip_address' | i18next">
                                        {[{ balancer.vip_info.address }]}
                                    </td>
                                    <td data-title="'balancer.public_ip' | i18next">
                                        {[{ balancer.vip_info.public_address }]}
                                    </td>
                                    <td data-title="'balancer.port' | i18next">{[{ balancer.vip_info.protocol_port }]}
                                    </td>
                                    <td data-title="'balancer.subnet' | i18next">{[{ balancer.subnet_info.address }]}
                                    </td>
                                    <td data-title="'balancer.protocol' | i18next">{[{ balancer.protocol_desc }]}</td>
                                    <td data-title="'balancer.status' | i18next">
                                        <span class=""
                                              data-ng-if="balancer.is_stable">{[{ balancer.status_text }]} </span>

                                        <div data-ng-if="balancer.is_unstable"
                                             class="progress progress-striped active"
                                             style="width:140px; margin-bottom:0px;">
                                            <div class="progress-bar progress-bar-success" role="progressbar"
                                                 aria-valuenow="20"
                                                 aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                                <span class="">{[{ balancer.status_text }]}</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td data-title="'balancer.operation' | i18next">
                                        <div class="btn-group" data-ng-if="balancer.is_stable">
                                            <button class="btn btn-default" type="button"
                                                    data-ng-click="openUpdateBalancerModal(balancer)">
                                                <i class="fa fa-edit"></i>
                                                {[{ 'edit' | i18next }]}
                                            </button>
                                            <button data-toggle="dropdown" class="btn btn-default dropdown-toggle"
                                                    type="button" aria-expanded="false">
                                                <i class="fa fa-angle-down"></i>
                                            </button>
                                            <ul role="menu" class="dropdown-menu">
                                                <li>
                                                    <a href="#/lbaas/{[{balancer.id}]}" role="button">
                                                        {[{ 'balancer.add_member' | i18next }]}
                                                    </a>
                                                </li>
                                                <li data-ng-if="balancer.vip == null">
                                                    <a href="javascript:void(0);"
                                                       data-ng-click="openVIPCreateModal(balancer)" role="button">
                                                        {[{ 'balancer.create_vip_title' | i18next }]}
                                                    </a>
                                                </li>
                                                <li data-ng-if-start="balancer.vip">
                                                    <a href="javascript:void(0);"
                                                       data-ng-click="openVIPUpdateModal(balancer)" role="button">
                                                        {[{ 'balancer.update_vip' | i18next }]}
                                                    </a>
                                                </li>
                                                <li data-ng-if-end>
                                                    <a href="javascript:void(0);" data-ng-click="deleteVIP(balancer)"
                                                       role="button">
                                                        {[{ 'balancer.delete_vip' | i18next }]}
                                                    </a>
                                                </li>
                                                <li data-ng-if="balancer.vip_info && !balancer.vip_info.public_address">
                                                    <a href="javascript:void(0);"
                                                       data-ng-click="openFloatingIPModal(balancer, 'associate')"
                                                       role="button">
                                                        {[{ 'balancer.bind_public' | i18next }]}
                                                    </a>
                                                </li>
                                                <li data-ng-if-end data-ng-if="balancer.vip_info.public_address">
                                                    <a href="javascript:void(0);"
                                                       data-ng-click="openFloatingIPModal(balancer, 'disassociate')"
                                                       role="button">
                                                        {[{ 'balancer.unbind_public' | i18next }]}
                                                    </a>
                                                </li>
                                                <li data-ng-if="balancer.is_active">
                                                    <a href="javascript:void(0);"
                                                       data-ng-click="openMonitorActionModal(balancer, 'attach')"
                                                       role="button">
                                                        {[{ 'balancer.attach_monitor' | i18next }]}
                                                    </a>
                                                </li>
                                                <li data-ng-if="balancer.is_active">
                                                    <a href="javascript:void(0);"
                                                       data-ng-click="openMonitorActionModal(balancer,'detach')"
                                                       role="button">
                                                        {[{ 'balancer.detach_monitor' | i18next }]}
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" ng-class="{active:monitor_tab, in:monitor_tab}" id="monitor">
                <div class="portlet">
                    <div class="portlet-title">
                        <div class="caption font-green-sharp">
                            <a class="btn btn-icon-only btn-default" href="#" ng-click="monitor_table.reload();">
                                <i class="fa fa-refresh"></i>
                            </a>
                            <a href="javascript:void(0);" id="loadBalance-fa-plus"
                               data-ng-click="openMonitorCreateModal()" class="btn btn-primary">
                                <i class="fa fa-plus"></i>{[{ 'balancer.create_monitor_title' | i18next }]}
                            </a>
                            <a class="btn btn-danger" title="" ng-click="deleteMonitors()"
                               ng-class="{'disabled-link disabled ': checked_monitor_count <= 0}">
                                <i class="fa fa-trash"></i>
                                {[{ 'balancer.delete' | i18next }]}
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="dataTables_wrapper no-footer">
                            <table ng-table="monitor_table"
                                   class="table table-striped table-bordered table-advance table-hover">
                                <tbody>
                                <tr data-ng-repeat="monitor in $data ">
                                    <td width="30" style="text-align: left" header="'ng-table/headers/checkbox2.html'">
                                        <input type="checkbox"
                                               data-ng-class="{'disabled': status_desc[balancer.status][1] == 0}"
                                               data-ng-model="checkboxes_monitor.items[monitor.id]"/>
                                    </td>

                                    <td data-title="'ID' | i18next">{[{ monitor.id}]}</td>
                                    <td data-title="'balancer.monitor_name' | i18next">{[{ monitor.name }]}</td>
                                    <td data-title="'balancer.monitor_type' | i18next">{[{ monitor.monitor_type_desc
                                        }]}
                                    </td>
                                    <td data-title="'balancer.balancer' | i18next">{[{ monitor.balancer_desc }]}</td>
                                    <td data-title="'balancer.delay' | i18next">{[{ monitor.delay }]}</td>
                                    <td data-title="'balancer.timeout' | i18next">{[{ monitor.timeout }]}
                                    </td>
                                    <td data-title="'balancer.max_try_count' | i18next">{[{ monitor.max_retries }]}
                                    </td>
                                    <td data-title="'balancer.operation' | i18next">
                                        <div class="btn-group">
                                            <button class="btn btn-default"
                                                    type="button" data-ng-click="openMonitorUpdateModal(monitor)">
                                                <i class="fa fa-edit"></i>
                                                {[{ 'edit' | i18next }]}
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END INSTANCE  -->
    </div>
</div>
<!-- END MAIN CONTENT -->
<!-- BEGIN MAIN JS & CSS -->
<!-- BEGIN MAIN JS & CSS -->
<script type="text/ng-template" id="ng-table/headers/checkbox.html">
    <input type="checkbox" ng-model="checkboxes.checked" id="select_all" name="filter-checkbox" value=""/>
</script>

<script type="text/ng-template" id="ng-table/headers/checkbox2.html">
    <input type="checkbox" ng-model="checkboxes_monitor.checked" id="select_all_monitor" name="filter-checkbox-monitor"
           value=""/>
</script>

<script type="text/ng-template" id="lbaas-method-tip.html">
    <ul>
        <li><p>{[{ 'balancer.round_robin_tip' | i18next }]}</p></li>
        <li><p>{[{ 'balancer.least_connections_tip' | i18next }]}</p></li>
        <li><p>{[{ 'balancer.source_ip_hash_tip' | i18next }]}</p></li>
    </ul>
</script>

<!--创建负载均衡资源 -->
<script type="text/ng-template" id="create_balancer.html">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()"></button>
        <h4 class="modal-title">{[{ 'balancer.create_balancer_title' | i18next }]}</h4>
    </div>
    <div class="modal-body">
        <form role="form" id="balancerForm" class="form-horizontal form-bordered">
            <div class="form-group">
                <label class="col-md-3 control-label" for="title">
                    {[{'balancer.balancer_name' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" maxlength="20" name="name"
                               data-ng-model="balancer.name"
                               class="form-control  required">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="title">
                    {[{'balancer.description' | i18next }]}
                </label>

                <div class="col-md-8">
                    <textarea class="form-control" data-ng-model="balancer.description" rows="3"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="title">
                    {[{'balancer.subnet' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <select class="form-control required" name="subnet"
                                data-ng-model="balancer.subnet"
                                data-ng-options="subnet.id as subnetInfo(subnet) for subnet in subnets">
                            <option value="" selected>{[{'balancer.select' | i18next }]}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="protocol">
                    {[{'balancer.protocol' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <select class="form-control requried" id="protocol" name="protocol"
                                data-ng-model="balancer.protocol"
                                data-ng-options="choice.key as choice.label for choice in Choice.LoadBalanceProtocol"></select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="lb_method">
                    {[{'balancer.lb_method' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <select class="form-control input-inline required" id="lb_method" name="lb_method"
                            data-ng-model="balancer.lb_method"
                            data-ng-options="choice.key as choice.label for choice in Choice.LoadBalanceMethod">
                    </select>
                    <span class="help-inline">
                        <a data-tooltip-template="'lbaas-method-tip.html'" data-tooltip-class="customClass">
                            <i class="fa fa-question-circle"></i>
                        </a>
                    </span>
                </div>
            </div>
        </form>
        <div class="clear"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-ng-click="cancel()"> {[{ 'cancel' | i18next }]}</button>
        <button class="btn btn-primary"
                data-ng-click="create(balancer)"
                data-nap-after-click>{[{ 'confirm' | i18next }]}
        </button>
    </div>
</script>

<!--修改负载均衡资源 -->
<script type="text/ng-template" id="update_balancer.html">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()"></button>
        <h4 class="modal-title">{[{ 'balancer.update_balancer_title' | i18next }]}</h4>
    </div>
    <div class="modal-body">
        <form role="form" id="balancerForm" class="form-horizontal form-bordered">
            <div class="form-group">
                <label class="col-md-3 control-label" for="name">
                    {[{'balancer.balancer_name' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" maxlength="20" id="name" name="name"
                               data-ng-model="balancer.name" class="form-control required">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="description">
                    {[{'balancer.description' | i18next }]}
                </label>

                <div class="col-md-8">
                    <textarea class="form-control" id="description" name="description"
                              data-ng-model="balancer.description" rows="3"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="lb_method">
                    {[{'balancer.lb_method' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <select class="form-control required" name="lb_method"
                                data-ng-model="balancer.lb_method"
                                data-ng-options="choice.key as choice.label for choice in Choice.LoadBalanceMethod">
                        </select>
                        <span class="help-inline">
                            <a data-tooltip-template="'lbaas-method-tip.html'">
                                <i class="fa fa-question-circle"></i>
                            </a>
                        </span>
                    </div>
                </div>
            </div>
        </form>
        <div class="clear"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-ng-click="cancel()"> {[{ 'cancel' | i18next }]}</button>
        <button class="btn btn-primary" data-ng-click="update(balancer)">{[{ 'confirm' | i18next }]}</button>
    </div>
</script>

<!--创建负载监听器 -->
<script type="text/ng-template" id="create_monitor.html">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()"></button>
        <h4 class="modal-title">{[{ 'balancer.create_monitor_title' | i18next }]}</h4>
    </div>
    <div class="modal-body">
        <form role="form" id="monitorForm" class="form-horizontal form-bordered">
            <div class="form-group">
                <label class="col-md-3 control-label" for="title">
                    {[{'balancer.monitor_name' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" name="name" class="form-control required"
                               data-ng-model="monitor.name"
                               data-ng-required="true"
                               data-ng-maxlength="120">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="type">
                    {[{'balancer.monitor_type' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <select class="form-control" id="type" name="type"
                                data-ng-model="monitor.type"
                                data-ng-options="choice.key as choice.label for choice in Choice.MonitorType">
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="interval">
                    {[{'balancer.interval' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="number" id="delay" name="delay" class="form-control"
                               data-ng-model="monitor.delay"
                               data-rule-min="0"
                               data-rule-required="true">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="timeout">
                    {[{'balancer.timeout' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="number" max="#delay" maxlength="20" id="timeout" name="timeout"
                               class="form-control required"
                               data-ng-model="monitor.timeout"
                               data-rule-min="0"
                               data-rule-lessThanDelay="#delay">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="max_retries">
                    {[{'balancer.max_try_count' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="number" name="max_retries" required
                               data-ng-model="monitor.max_retries"
                               data-rule-min="1" data-rule-max="10"
                               data-rule-digits="true"
                               class="form-control required">
                    </div>
                </div>
            </div>
            <div class="form-group" data-ng-if="needUrl(monitor)">
                <label class="col-md-3 control-label" for="url_path">
                    URL<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-9">
                    <input type="text" id="url_path" name="url_path" size="80"
                           data-ng-model="monitor.url_path"
                           data-rule-maxlength="80"
                           class="form-control input-inline input-medium required"/>
                    <span class="help-inline">
                        <a data-tooltip="{[{ 'balancer.monitor_url_path_help_text' | i18next }]}">
                            <i class="fa fa-question-circle"></i>
                        </a>
                    </span>
                </div>
            </div>
            <div class="form-group" data-ng-if="needUrl(monitor)">
                <label class="col-md-3 control-label" for="expected_codes">
                    {[{'balancer.HTTP_STATUS_CODE' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>
                <div class="col-md-9">
                        <input id="expected_codes" name="expected_codes"
                               data-ng-model="monitor.expected_codes"
                               class="form-control input-inline input-medium"
                               data-rule-required="true"
                               data-rule-expectedCodes="true">
                    <span class="help-inline">
                        <a data-tooltip="{[{ 'balancer.monitor_expected_codes_help_text' | i18next }]}">
                            <i class="fa fa-question-circle"></i>
                        </a>
                    </span>
                </div>
            </div>
        </form>
        <div class="clear"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-ng-click="cancel()">
            {[{ 'cancel' | i18next }]}
        </button>
        <button class="btn btn-primary" data-ng-click="create(monitor)"
                data-nap-after-click>
            {[{ 'confirm' | i18next }]}
        </button>
    </div>
</script>
<!--修改负载监听器 -->
<script type="text/ng-template" id="update_monitor.html">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" ng-click="cancel()"></button>
        <h4 class="modal-title">{[{ 'balancer.update_monitor_title' | i18next }]}</h4>
    </div>
    <div class="modal-body">
        <form role="form" id="monitorForm" class="form-horizontal form-bordered">
            <div class="form-group">
                <label class="col-md-3 control-label" for="name">
                    {[{'balancer.monitor_name' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" data-ng-model="monitor.name" class="form-control" disabled>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="delay">
                    {[{'balancer.delay' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="number" id="delay" name="delay" class="form-control"
                               data-ng-model="monitor.delay"
                               data-rule-min="0"
                               data-rule-required="true">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="timeout">
                    {[{'balancer.timeout' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="number" max="#delay" maxlength="20" id="timeout" name="timeout"
                               class="form-control required"
                               data-ng-model="monitor.timeout"
                               data-rule-min="0"
                               data-rule-lessThanDelay="#delay">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="max_retries">
                    {[{'balancer.max_try_count' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="number" name="max_retries" required
                               data-ng-model="monitor.max_retries"
                               data-rule-min="1" data-rule-max="10"
                               data-rule-digits="true"
                               class="form-control required">
                    </div>
                </div>
            </div>
        </form>
        <div class="clear"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-ng-click="cancel()"> {[{ 'cancel' | i18next }]}</button>
        <button class="btn btn-primary" data-ng-click="update(monitor)">{[{ 'confirm' | i18next }]}</button>
    </div>
</script>

<!--关联-解除关联监听器 -->
<script type="text/ng-template" id="attach_monitor.html">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()"></button>
        <h4 class="modal-title" ng-if="action == 'attach'">{[{ 'balancer.attach_monitor' | i18next }]}</h4>
        <h4 class="modal-title" ng-if="action == 'detach'">{[{ 'balancer.detach_monitor' | i18next }]}</h4>
    </div>
    <div class="modal-body">
        <form role="form" id="monitorForm" class="form-horizontal form-bordered">
            <div class="form-group">
                <label class="col-md-3 control-label" for="monitor">
                    {[{'balancer.monitor' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <select class="form-control" id="monitor" name="monitor"
                                data-ng-model="monitor"
                                data-ng-options="monitor.id as monitorInfo(monitor) for monitor in monitors"
                                data-rule-required="true">
                            <option value=""> {[{ 'balancer.select_monitor' | i18next }]}</option>
                        </select>
                    </div>
                </div>
            </div>
        </form>
        <div class="clear"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-ng-click="cancel()"> {[{ 'cancel' | i18next }]}</button>
        <button class="btn btn-primary" data-ng-click="executeAction(monitor)">{[{ 'confirm' | i18next }]}</button>
    </div>
</script>

<script type="text/ng-template" id="floating_ip_action.html">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()"></button>
        <h4 class="modal-title" data-ng-if="action=='associate'">{[{ 'balancer.bind_public' | i18next }]}</h4>
        <h4 class="modal-title" data-ng-if="action == 'disassociate'">{[{ 'balancer.unbind_public' | i18next }]}</h4>
    </div>
    <div class="modal-body">
        <form role="form" id="actionForm" class="form-horizontal form-bordered">
            <div class="form-group">
                <label class="col-md-3 control-label" for="floating_ip">
                    {[{'balancer.public_ip' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <select class="form-control" id="floating_ip" name="floating_ip"
                                data-ng-model="floating_ip"
                                data-ng-options="fp.id as fp.ip for fp in floating_ips"
                                data-rule-required="true">
                            <option value="">{[{ 'balancer.select_public_ip' | i18next }]}</option>
                        </select>
                    </div>
                </div>
            </div>
        </form>
        <div class="clear"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-ng-click="cancel()"> {[{ 'cancel' | i18next }]}</button>
        <button class="btn btn-primary" data-ng-click="executeAction(floating_ip)">{[{ 'confirm' | i18next }]}</button>
    </div>
</script>

<!--创建VIP -->
<script type="text/ng-template" id="create_vip.html">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()"></button>
        <h4 class="modal-title">{[{ 'balancer.create_vip_title' | i18next }]}</h4>
    </div>
    <div class="modal-body">
        <form role="form" id="vipForm" class="form-horizontal form-bordered">
            <div class="form-group">
                <label class="col-md-3 control-label" for="name">
                    {[{'balancer.vip_name' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" maxlength="20" id="name" name="name"
                               data-ng-model="vip.name" class="form-control required">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="desc">
                    {[{'balancer.description' | i18next }]}
                </label>

                <div class="col-md-8">
                    <textarea class="form-control" id="desc" data-ng-model="vip.description" rows="3"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="protocol_port">
                    {[{'balancer.protocol_port' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" maxlength="20" min="0" max="65535" id="protocol_port" name="protocol_port"
                               data-ng-model="vip.protocol_port" class="form-control number required">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="session_persistence">
                    {[{'balancer.session_persistence' | i18next }]}
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <select class="form-control" id="session_persistence" name="session_persistence"
                                data-ng-model="vip.session_persistence"
                                data-ng-options="choice.key as choice.label for choice in Choice.SessionPersistence">
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="connection_limit">
                    {[{'balancer.connection_limit' | i18next }]}
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" maxlength="20"
                               id="connection_limit" name="connection_limit"
                               data-ng-model="vip.connection_limit"
                               class="form-control number ">
                    </div>
                </div>
            </div>
        </form>
        <div class="clear"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-ng-click="cancel()"> {[{ 'cancel' | i18next }]}</button>
        <button class="btn btn-primary" data-ng-click="create(vip)">{[{ 'confirm' | i18next }]}</button>
    </div>
</script>

<script type="text/ng-template" id="update_vip.html">
    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" data-ng-click="cancel()"></button>
        <h4 class="modal-title">{[{ 'balancer.update_vip_title' | i18next }]}</h4>
    </div>
    <div class="modal-body">
        <form role="form" id="vipForm" class="form-horizontal form-bordered">
            <div class="form-group">
                <label class="col-md-3 control-label" for="name">
                    {[{'balancer.vip_name' | i18next }]}<span class="required" aria-required="true"> * </span>
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" maxlength="20" id="name" name="name"
                               data-ng-model="vip.name" class="form-control  required">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-3 control-label" for="desc">
                    {[{'balancer.description' | i18next }]}
                </label>

                <div class="col-md-8">
                    <textarea class="form-control" data-ng-model="vip.description" rows="3"></textarea>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label" for="session_persistence">
                    {[{'balancer.session_persistence' | i18next }]}
                </label>

                <div class="col-md-8">
                    <div class="input-group">
                        <select class="form-control" id="session_persistence" name="session_persistence"
                                data-ng-model="vip.session_persistence"
                                data-ng-options="choice.key as choice.label for choice in Choice.SessionPersistence">
                        </select>
                    </div>
                </div>
            </div>
        </form>
        <div class="clear"></div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-default" data-ng-click="cancel()"> {[{ 'cancel' | i18next }]}</button>
        <button class="btn btn-primary" data-ng-click="update(vip)">{[{ 'confirm' | i18next }]}</button>
    </div>
</script>
